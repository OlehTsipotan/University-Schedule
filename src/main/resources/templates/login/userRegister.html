<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
    <meta content="University schedule web-application " name="description"/>
    <meta content="Oleh Tsipotan" name="author"/>
    <title>Register</title>

    <link rel="icon" th:href="@{/assets/calendar-days-solid.svg}" type="image/x-icon"/>

    <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.3.1/css/bootstrap.min.css}"/>
    <link rel="stylesheet" th:href="@{https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css}"/>
    <link rel="stylesheet" th:href="@{https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css}"/>

</head>
<body>
<div class="container">
    <div class="row mt-5">
        <div class="col-md-6 offset-md-3">
            <div th:if="${validationServiceErrors != null}">
                <div class="alert alert-warning mt-3" th:each="violation : ${validationServiceErrors}"
                     th:text="${violation}"></div>
            </div>

            <div th:if="${registrationServiceError != null}">
                <div class="alert alert-warning mt-3"
                     th:text="${registrationServiceError}"></div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2 class="text-center">User Registration</h2>
                </div>
                <div class="card-body">
                    <form
                        class="form-horizontal"
                        method="post"
                        role="form"
                        th:action="@{/user/register}"
                        th:object="${userRegisterDTO}"
                    >
                        <!--Email Input-->
                        <div class="form-group mb-3">
                            <label class="control-label">Email</label>
                            <input id="inputEmail" name="email" placeholder="myemail@email.com" required
                                   th:class="${success != null ? 'is-valid form-control' : (#fields.hasErrors('email') ? 'is-invalid form-control' : 'form-control')}"
                                   type="email">
                            <div class="valid-feedback" th:if="${success}">
                                Looks good!
                            </div>
                            <div class="invalid-feedback"
                                 th:each="error : ${#fields.errors('email')}"
                                 th:text=${error}>
                            </div>
                        </div>
                        <!--FirstName Input-->
                        <div class="form-group mb-3">
                            <label class="control-label">First Name</label>
                            <input id="inputFirstName" name="firstName" placeholder="First Name" required
                                   th:class="${success != null ? 'is-valid form-control' : (#fields.hasErrors('firstName') ? 'is-invalid form-control' : 'form-control')}"
                                   type="text">
                            <div class="valid-feedback" th:if="${success}">
                                Looks good!
                            </div>
                            <div class="invalid-feedback"
                                 th:each="error : ${#fields.errors('firstName')}"
                                 th:text=${error}>
                            </div>
                        </div>
                        <!--LastName Input-->
                        <div class="form-group mb-3">
                            <label class="control-label">Last Name</label>
                            <input id="inputLastName" name="lastName" placeholder="Last Name" required
                                   th:class="${success != null ? 'is-valid form-control' : (#fields.hasErrors('lastName') ? 'is-invalid form-control' : 'form-control')}"
                                   type="text">
                            <div class="valid-feedback" th:if="${success}">
                                Looks good!
                            </div>
                            <div class="invalid-feedback"
                                 th:each="error : ${#fields.errors('lastName')}"
                                 th:text=${error}>
                            </div>
                        </div>
                        <!-- Role Input -->
                        <div class="form-group mb-3">
                            <label class="control-label">Role</label>
                            <select class="form-select" id="inputRole" name="roleDTO.id" required
                                    th:class="${success != null ? 'is-valid form-select' : (#fields.hasErrors('roleDTO') ? 'is-invalid form-select' : 'form-select')}">
                                <option th:each="roleDTO : ${roleDTOList}" th:text="${roleDTO.getName()}"
                                        th:value="${roleDTO.getId()}"></option>
                            </select>
                            <div class="valid-feedback" th:if="${success}">
                                Looks good!
                            </div>
                            <div class="invalid-feedback"
                                 th:each="error : ${#fields.errors('roleDTO')}"
                                 th:text=${error}>
                            </div>
                        </div>
                        <!--Password Input-->
                        <div class="form-group mb-3">
                            <label class="control-label">Password</label>
                            <input id="inputPassword" name="password" placeholder="Password" required
                                   th:class="${success != null ? 'is-valid form-control' : (#fields.hasErrors('password') ? 'is-invalid form-control' : 'form-control')}"
                                   type="password">
                            <div class="valid-feedback" th:if="${success}">
                                Looks good!
                            </div>
                            <div class="invalid-feedback"
                                 th:each="error : ${#fields.errors('password')}"
                                 th:text=${error}>
                            </div>
                        </div>
                        <!--ConfirmationPassword Input-->
                        <div class="form-group mb-3">
                            <label class="control-label">Confirm Password</label>
                            <input id="inputConfirmationPassword" name="confirmationPassword" placeholder="Confirmation Password"
                                   required
                                   th:class="${success != null ? 'is-valid form-control' : (#fields.hasErrors('confirmationPassword') ? 'is-invalid form-control' : 'form-control')}"
                                   type="password">
                            <div class="valid-feedback" th:if="${success}">
                                Looks good!
                            </div>
                            <div class="invalid-feedback"
                                 th:each="error : ${#fields.errors('confirmationPassword')}"
                                 th:text=${error}>
                            </div>
                        </div>
                        <div class="form-group mb-3">
                            <button class="btn btn-primary" type="submit">Submit</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>
